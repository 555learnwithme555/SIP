$def with (records)

<!doctype html>

<html>

<html>
<head>
	<meta name="viewport" content="width=640">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>OpenSprinkler Pi Log${" - "+gv.sd['name'] if gv.sd['name']!="OpenSprinkler Pi" else ""}</title>
	<link href="/static/images/favicon.ico" rel="icon" type="image/x-icon">
	<link href="${gv.baseurl}/static/themes/${gv.sd['theme']}/base.css" rel="stylesheet" type="text/css"/>	
	<style>
		h2 {
			text-align: center;
			font-family: Sans-serif;
		}
		
		.pwspan { 
			float:left; 
			border-style:none;
			clear:both;
			margin:10px 0px 10px 0px;
		}
	
	</style>
	<script src="${gv.baseurl}/static/scripts/jquery-1.8.2.min.js"></script>
	<script>
		// Initialize behaviors
		jQuery(document).ready(function(){
			var ipas = $gv.sd['ipas'];
			
			jQuery("button#nBack").click(function(){
				window.location="/";
			});
			jQuery("button#nRefresh").click(function(){
				window.location="/vl";
			});
			jQuery("button#nDeleteAll").click(function(){
				var p = "";
				if (!ipas) {
					p = prompt("Password Required","");
				}
				if (p != null) {
					jQuery("#pw") = p;
					jQuery("form#df").submit();
				}
			});
			jQuery("button#nLogOptions,button#oCancel").click(function(){
				jQuery("#overlay").toggle();
			});
			jQuery("button#oSubmit").click(function(){
				jQuery("form#logopts").submit();
				jQuery("#overlay").toggle();
			});

			if (ipas) {
				jQuery("#pwarea").hide()
			} else {
				jQuery("#pwarea").show()
			}
		});

	</script>
</head>
	
<body>
	<div class="content">
		<div class="header">
			<div class="title">Activity Log</div>
		</div>
		
		<div class="body">
		
			<div id="nav">
				<form method="get" action="cl" name="df">
					<input id="pw" name="pw" type="hidden" />
				</form>
				<form method="get" action="mp" name="mf">
					<input id="pid" name="pid" type="hidden" value="-1" />
				</form>
				
				<button id="nBack" class="back icon">Back</button>
				<button id="nRefresh" class="refresh icon">Refresh</button>
				<button id="nDeleteAll" class="delete icon">Delete All</button>
				<button id="nLogOptions" class="options icon">Log Options</button>
			</div>
			
			<div id="log">
				$code:
				    if gv.sd['lg'] == 1:
				        log_state = "Enabled"
				        log_option = "checked"
				    else:
				        log_state = "Disabled"
				        log_option = ""

				<div>Logging $log_state</div>
				<b>Total number of records: $(len(records)-1)</b>
				<hr>
				
				<table>
					$for r in records:
						<tr class="log_rec">
						$for d in r:
							<td align='center'>$d</td>
						</tr>
				</table>

			</div>
		</div>
		
		<div id="overlay">
			<div>
				<form id="logopts" action="/lo" method="get">
					<h2>Log Options</h2>
					<label for="log">Enable Logging</label>
					<input type="checkbox" id="log" name="log" $log_option ><br>
					<label for="nrecords">Maximum records to keep:</label>
					<input type="text" size="4" value="$gv.sd['lr']" id="nrecords" name="nrecords">(0 = no limit)<br>
					<span id='pwarea' class="pwspan">
						<label for="pw">Password Required:</label> <input type="password" size="10" id="pw">
					</span><br>
					<button id="oSubmit" class="submit icon">Submit</button>
					<button id="oCancel" class="cancel icon">Cancel</button>
				</form>
			</div>
		</div>
		
		<div class="footer">
		</div>
	</div>
</body>

</html>